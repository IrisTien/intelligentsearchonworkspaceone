appCenter.config(["$stateProvider","$urlRouterProvider","$provide","$transitionsProvider",function(t,e,o,n){o.decorator("$state",["$delegate",function(e){return n.onStart({},function(t){e.next=t.to(),e.prev=t.from(),e.toParams=t.params()}),e}]),t.state("apps",{url:"/apps",component:"apps",desktopPageTitle:"hub.nav.label.apps",currentTab:"apps"}).state("apps.list",{url:"/:type/:category",component:"appList",desktopPageTitle:"hub.nav.label.apps",currentTab:"apps",params:{category:{squash:!0,value:null}}}).state("apps.details",{url:"/details/:appId",component:"appDetails",currentTab:"apps"}).state("apps.list.details",{url:"/details/:appId",component:"appDetails"}).state("apps.favoritesedit",{url:"/favoritesedit",component:"favorites",currentTab:"apps"}).state("people",{url:"/people",component:"people",desktopPageTitle:"hub.nav.label.people",currentTab:"people"}).state("people.details",{url:"/details/:userId",component:"peopleDetail",currentTab:"people"}).state("notifications",{url:"/notifications/:filter",component:"notificationsV2",activeTab:"notifications",desktopPageTitle:"hub.nav.label.notification",params:{filter:{squash:!0,value:"all"}}}).state("notifications.details",{url:"/details/:notificationId",component:"notificationDetails",desktopPageTitle:"hub.nav.label.notification"}).state("notifications.filter-details",{url:"/details/:filter/:notificationId",component:"notificationDetails"}).state("notifications.newApps",{url:"/newApps/:notificationId",desktopPageTitle:"hub.nav.label.notification",component:"notificationsNewAppsV2"}),t.state("index",{url:"/index",controller:["$location",function(t){t.path("/apps"),t.replace()}],resolve:{initAppCalls:["BootstrapService",function(t){return t.getInitAppCallsPromise()}]}}),e.otherwise("/index")}]),appCenter.component("breadcrumb",{templateUrl:"app-v2/components/breadcrumb/breadcrumb.html",bindings:{hideInstall:"<",hideRefresh:"<"},controllerAs:"breadcrumbCtrl",controller:["UserAgent","SettingsService","ConfigService","$state","$rootScope","$filter","TenantCustomizationService","$scope","NotificationService","UtilService","ClientRuntimeService",function(t,e,o,n,i,a,r,s,l,c,p){var u=this;u.isDesktopAppRefreshing=!1,this.userInfo=e.getCurrentUser()||{};var d=l.showNativeBell();u.desktopPageTitle=a("i18n")(n.current.desktopPageTitle),u.$state=n,Object.keys(this.userInfo).length&&(this.userInfo.initials=this.userInfo.firstName[0]+this.userInfo.lastName[0]),u.desktopRefresh=function(t){u.isDesktopAppRefreshing||(u.isDesktopAppRefreshing=!0,o.refreshCache().then(function(){u.isDesktopAppRefreshing=!1},function(){u.isDesktopAppRefreshing=!1}),"apps"===t&&i.$broadcast("Desktop-Apps-Refresh"),"people"===t&&i.$broadcast("Desktop-People-Refresh"))},u.showAppInstall=function(){p.showAppInstall()},u.checkNotificationsEnabled=function(){u.inAppNotificationEnabled=r.isNotificationsEnabled()&&c.isHubV2NotificationsEnabled()&&!d&&("apps"===n.current.name||"apps.details"===n.current.name)},u.checkNotificationsEnabled(),s.$on("customizations-loaded",function(){u.checkNotificationsEnabled()})}]}),function(t){"use strict";angular.module("com.vmware.greenbox.appCenter").directive("contextdialog",["$compile","$timeout","$rootScope","$templateCache","$http","UserAgent","$window",function(s,l,t,c,e,o,p){var u,d;return{restrict:"A",controller:function(){var o=c.get;c.get=function(t){var e=o(t);return angular.isArray(e)?e[1]:e},u=angular.noop,d="click"},bindToController:!0,link:function(o,n,i){var t=i.contextdialog;if(t){var a,e,r=o.$eval(t);a=i,(e=r.uris)&&angular.forEach(e,function(t,e){if(t){var o=a[e]||a[angular.lowercase(e)];o&&a.$set("contextdialogTmplId",o)}}),n.on(d,function(t){t.preventDefault(),t.stopPropagation(),o.$apply(function(){u();parseInt(i.contextdialogtp);if(i.contextdialogTmplId){var e;if(!i.contextdialogId){var t=o.$new();angular.extend(t,r.scope),(e=s(c.get(i.contextdialogTmplId))(t)).attr("id","hzn"+(new Date).getTime()),n.closest(".app-label-container").addClass("contextmenu-on"),e.on("click touchstart",function(t){t.stopPropagation()}),n.append(e),i.$set("contextdialogId","#"+e.attr("id"))}angular.element(p).on("resize",function(){p.innerWidth;angular.element(".global-container-browser").find(".appitem-contextdialog-container").remove(),n.append(e),f(n,e)}),l(function(){f(n,e)},0,!1),u=function(t){!t||t.data&&t.data.propagate||t.stopPropagation(),$(document).off("click touchstart",u),e.off("click","a, button",u),angular.element(p).off("resize"),n.closest(".app-label-container").removeClass("contextmenu-on"),e.remove(),i.$set("contextdialogId",""),u=angular.noop}}})})}}};function f(t,e){var o,n=t.closest(".content-container-scrollable, body"),i=n.offset(),a=t.offset(),r=e.find(".appitem-contextdialog-actions-list").outerWidth(),s=e.find(".appitem-contextdialog-actions-list").outerHeight(),l="south",c="";i.right=i.left+n.outerWidth(),i.bottom=i.top+n.outerHeight(),a.right=a.left+t.outerWidth(),a.bottom=a.top+t.outerHeight(),a.top+s>i.bottom&&a.bottom-s>=i.top&&(l="north"),a.left+r<=i.right?c="east":a.right-r>=i.left&&(c="west"),o=l+c,e.removeClass("north northeast northwest south southeast southwest").addClass(o),e.on("click","a, button",u),$(document).on("click touchstart",{propagate:!0},u),$(".modal-container").on("click touchstart",u)}}])}(),angular.module("com.vmware.greenbox.appCenter").directive("searchResultsClose",["UserAgent","$timeout","$document","$window",function(i,a,r,s){return{restrict:"A",scope:{close:"&?",showScrim:"=?"},link:function(e,t,o){function n(t){if(i.isMobile()&&s.innerWidth<=1024)return!1;a(function(){e.close()})}i.isMobile()&&t.bind("touchstart scroll",function(t){i.isAWJade()?$("input").blur():a(function(){e.close()})}),e.$watch("showScrim",function(){e.showScrim?a(function(){r.bind("click",n)}):a(function(){r.unbind("click",n)})})}}}]),appCenter.component("favorites",{templateUrl:"app-v2/components/favorites/favorites.html",controllerAs:"favoritesCtrl",controller:["$q","BookmarksService","HttpProxyService","BootstrapService","UserAgent","$state","$scope","AppsService","ModalService","$filter","$timeout","$rootScope","$notify",function(t,e,o,n,i,a,r,s,l,c,p,u,d){var f=this;f.emptyFillers=[1,2,3,4,5,6,7,8],f.favoritesBeforeEdit=[],f.favoritesInEditMode=s.getFavorites(),f.sortingButtonEnabled=!1,f.sortingOrderUpdatedWithoutActions=!1,f.sortingWarningMessageShow=!1,f.isWindows=i.isWindows();var g=_.clone(f.favoritesInEditMode);f.sortableOptions={cursor:"move",placeholder:"sort-placeholder",forcePlaceholderSize:!0,forceHelperSize:!0,opacity:.8,revert:100,helper:"clone",tolerance:"intersect",containment:"parent"},f.sortingUpdate=function(t,e){f.sortingButtonEnabled=!0,f.sortingOrderUpdatedWithoutActions=!0};f.cancelSorting=function(){f.savingfavorites=!1,f.sortingButtonEnabled=!1,f.favoritesInEditMode=g,p(function(){m(),u.$broadcast("favorites-reordering-canceled")},1e3)},f.saveCustomView=function(){f.savingfavorites=!0,f.sortingOrderUpdatedWithoutActions=!1,f.sortingButtonEnabled=!1,e.saveCustomView(_.map(f.favoritesInEditMode,"appId")).then(function(t){o.clearAll(),d.success("hub.apps.edit.favorites.notify.success"),f.savingfavorites=!1,p(function(){m()},3e3)},function(){d.error("hub.apps.edit.favorites.notify.error"),f.cancelSorting(),p(function(){m()},3e3)})},f.exitEditMode=function(t){f.sortingOrderUpdatedWithoutActions||f.savingfavorites?(f.sortingWarningMessageShow=!0,t.preventDefault()):m()};var m=function(){a.go("apps")};r.$on("$locationChangeStart",function(t,e,o){f.sortingOrderUpdatedWithoutActions&&(f.sortingWarningMessageShow=!0,t.preventDefault())})}]}),appCenter.component("appPromotions",{templateUrl:"app-v2/components/appPromotions/appPromotionsBrowser.html",bindings:{promotions:"<",applications:"<",categories:"<"},controller:["$window","$scope","$timeout","UserAgent",function(t,e,o,n){var i=this;i.carouselConfig={loop:!0,autoWidth:!0,dots:!0,nav:!0,center:!0,margin:0,items:3},1==this.promotions.length&&(i.carouselConfig.mouseDrag=!1,i.carouselConfig.nav=!1,i.carouselConfig.dots=!1,i.carouselConfig.touchDrag=!1),2<=this.promotions.length&&o(function(){$(".owl-carousel").find(".owl-nav").removeClass("disabled"),$(".owl-carousel").on("changed.owl.carousel",function(t){$(this).find(".owl-nav").removeClass("disabled")}),$(".owl-carousel").on("resized.owl.carousel",function(t){$(this).find(".owl-nav").removeClass("disabled")})},200),i.isIOSAndroid=n.isIOS()||n.isAndroid(),i.getAppIcon=function(t){return this.applications[t]&&this.applications[t].iconUrl},i.getAppName=function(t){return this.applications[t]&&this.applications[t].name}}],controllerAs:"appPromotionsBrowserCtrl"}),function(t){"use strict";t.directive("lineClamp2",["$timeout","$window","UserAgent",function(a,r,$){return{link:function(t,e){var o=angular.element(r),n={content:t.content.trim(),lines:t.lines},i=_.debounce(function(){!function(t,e){if("nowrap"===window.getComputedStyle(t).whiteSpace||1==e.lines)return t.textContent=e.content;var o,n=e.content,i=t.scrollHeight,a=function(t,e){var o,n=(c=t,p=window.getComputedStyle(c).lineHeight,u=parseFloat(p),isNaN(u)?(d=c,m=d.cloneNode(),d.appendChild(m),m.innerHTML="<br />",f=m.scrollHeight,m.innerHTML="<br /><br />",g=m.scrollHeight,d.removeChild(m),g-f):u),i=e*n,a=window.getComputedStyle(t),r=parseFloat(a.height),s=parseFloat(a.maxHeight),l=[i];var c,p,u,d,f,g,m;isNaN(r)||l.push(r);isNaN(s)||l.push(s);return i=Math.min.apply(Math,l),o=Math.max(n/4,1),i+o}(t,e.lines),r=[];r=n.split(" ");var s=!1,l=(f=r,g=f.reduce(function(t,e){return t.length>e.length?t:e}),g),c=document.createElement("canvas").getContext("2d"),p=window.getComputedStyle(t),u=[],d="";var f,g;null!==p.fontFamily||void 0!==p.fontFamily?(u=p.fontFamily.split(","),d=u[0].trim().replace(/"/g,"")):d="Open Sans Regular";var m="";m=null!==p.fontSize||void 0!==p.fontSize?p.fontSize:"14px";var h=m+" "+d;c.font=h;var v=c.measureText(l).width,b=angular.element(t).width();b<v&&(s=!0);{if($.isChrome()&&0==s||$.isSafari()&&0==s)return t.textContent=e.content;1==s&&angular.element(t).css("word-break","break-all")}if(i<=a)return;for(o=n.length;o&&t.scrollHeight>a;--o)n=n.substring(0,o),t.textContent=n.trim()+w}(e[0],n)},100),w="…";o.bind("resize",i),t.$on("$destroy",function(){o.unbind("resize",i)}),a(i,0,!1)},replace:!0,restrict:"A",scope:{content:"=",lines:"="},template:"<p>{{::content}}</p>"}}])}(angular.module("com.vmware.greenbox.appCenter"));