appCenter.config(["$stateProvider","$urlRouterProvider","$provide","$transitionsProvider",function(e,t,n,o){function i(e,t,n){var o=t.defer();return e.canHubNavigate(n)?o.resolve():o.reject(),o.promise}i.$inject=["StateResolveService","$q","$state"],n.decorator("$state",["$delegate",function(t){return o.onStart({},function(e){t.next=e.to(),t.prev=e.from(),t.toParams=e.params()}),t}]),e.state("apps",{url:"/apps",component:"apps",activeTab:"apps",browserPageTitle:"hub.nav.label.apps",resolve:{resolver:i}}).state("apps.list",{url:"/:type/:category",component:"appList",params:{category:{squash:!0,value:null}},activeTab:"apps",browserPageTitle:"hub.nav.label.apps"}).state("apps.details",{url:"/details/:appId",component:"appDetails"}).state("apps.list.details",{url:"/details/:appId",component:"appDetails",activeTab:"apps",browserPageTitle:"hub.nav.label.apps"}).state("apps.favoritesedit",{url:"/favoritesedit",component:"favorites"}).state("people",{url:"/people",component:"people",activeTab:"people",browserPageTitle:"hub.nav.label.people",resolve:{resolver:i}}).state("people.details",{url:"/details/:userId",component:"peopleDetail",browserPageTitle:"hub.nav.label.people",resolve:{resolver:i}}).state("people.search",{url:"/search-people",component:"peopleSearch",browserPageTitle:"hub.nav.label.people"}).state("settings",{url:"/settings",component:"settings",activeTab:"settings",browserPageTitle:"hub.nav.label.settings"}).state("notifications",{url:"/notifications/:filter",component:"notificationsV2",activeTab:"notifications",browserPageTitle:"hub.nav.label.notification",resolve:{resolver:i},params:{filter:{squash:!0,value:"all"}}}).state("notifications.details",{url:"/details/:notificationId",component:"notificationDetails",browserPageTitle:"hub.nav.label.notification",resolve:{resolver:i}}).state("notifications.filter-details",{url:"/details/:filter/:notificationId",component:"notificationDetails",resolve:{resolver:i}}).state("notifications.newApps",{url:"/newApps/:notificationId",component:"notificationsNewAppsV2",browserPageTitle:"hub.nav.label.notification",resolve:{resolver:i}}).state("newAppsList",{url:"/newApps/:notificationId",component:"newAppsNotificationsList",resolve:{resolver:i},activeTab:"newApps"}),e.state("index",{url:"/index",controller:["StateResolveService","$location",function(e,t){t.path("/apps"),t.replace()}],resolve:{initAppCalls:["BootstrapService",function(e){return e.getInitAppCallsPromise()}]}}),t.otherwise("/index")}]),appCenter.component("ribbon",{templateUrl:"app-v2/components/ribbon/ribbon.html",controllerAs:"ribbonCtrl",controller:["UserAgent","SettingsService","ClientRuntimeService","UtilService","ModalService","SignOutService","ConfigService","$filter","$state","$transitions","TenantCustomizationService","$scope",function(n,o,e,i,t,r,a,s,l,c,p,u){var d=this;d.userInfo=o.getCurrentUser()||{},d.isAWJade=n.isAWJade();var f={apps:s("i18n")("hub.nav.label.apps"),"apps.details":s("i18n")("hub.nav.label.apps"),"apps.list":s("i18n")("hub.nav.label.apps"),"apps.list.details":s("i18n")("hub.nav.label.apps"),people:s("i18n")("hub.nav.label.people"),"people.details":s("i18n")("hub.nav.label.people"),notifications:s("i18n")("hub.nav.label.notification"),"notifications.details":s("i18n")("hub.nav.label.notification"),"notifications.filter-details":s("i18n")("hub.nav.label.notification"),"notifications.newApps":s("i18n")("hub.nav.label.notification"),newAppsList:s("i18n")("myapps.mobilepagetitle.notification.newapps"),settings:s("i18n")("hub.nav.label.settings")};d.isSettingsLoaded=!1,d.showContextDialog=!1,d.showNotificationsFilters=!1,d.filter="",d.toggleContextDialog=function(){d.showContextDialog=!d.showContextDialog};var g=function(){d.userInfo=o.getCurrentUser(),(d.userInfo.firstName||d.userInfo.lastName)&&(d.userInfo.initials=d.userInfo.firstName[0]+d.userInfo.lastName[0]),d.showPeopleTab=p.isHubPeopleEnabled();var e=i.isHubV2NotificationsEnabled(),t=p.isNotificationsEnabled();d.showNotifications=t&&e};d.browserPageTitle=s("i18n")(l.current.browserPageTitle),c.onStart({to:"**",from:"**"},function(e){var t=e.to().name;d.browserPageTitle=f[t],"notifications"===t&&n.isMobileBrowser()?(d.showNotificationsFilters=!0,d.filter=e.params("to").filter):d.showNotificationsFilters=!1,d.isSettingsLoaded="settings"===t}),g(),u.$on("customizations-loaded",function(){g()}),d.adminConsole=function(e){e&&e.preventDefault(),a.getAdminConsoleUrl().then(function(e){window.open(e)})},d.hubSignOut=function(e){r.continueSignOut(e)},d.goToSettings=function(e){l.go("settings")}}]}),appCenter.component("favorites",{templateUrl:"app-v2/components/favorites/favorites.html",controllerAs:"favoritesCtrl",controller:["$q","BookmarksService","HttpProxyService","BootstrapService","UserAgent","$state","$scope","AppsService","ModalService","$filter","$timeout","$rootScope","$notify",function(e,t,n,o,i,r,a,s,l,c,p,u,d){var f=this;f.emptyFillers=[1,2,3,4,5,6,7,8],f.favoritesBeforeEdit=[],f.favoritesInEditMode=s.getFavorites(),f.sortingButtonEnabled=!1,f.sortingOrderUpdatedWithoutActions=!1,f.sortingWarningMessageShow=!1,f.isWindows=i.isWindows();var g=_.clone(f.favoritesInEditMode);f.sortableOptions={cursor:"move",placeholder:"sort-placeholder",forcePlaceholderSize:!0,forceHelperSize:!0,opacity:.8,revert:100,helper:"clone",tolerance:"intersect",containment:"parent"},f.sortingUpdate=function(e,t){f.sortingButtonEnabled=!0,f.sortingOrderUpdatedWithoutActions=!0};f.cancelSorting=function(){f.savingfavorites=!1,f.sortingButtonEnabled=!1,f.favoritesInEditMode=g,p(function(){v(),u.$broadcast("favorites-reordering-canceled")},1e3)},f.saveCustomView=function(){f.savingfavorites=!0,f.sortingOrderUpdatedWithoutActions=!1,f.sortingButtonEnabled=!1,t.saveCustomView(_.map(f.favoritesInEditMode,"appId")).then(function(e){n.clearAll(),d.success("hub.apps.edit.favorites.notify.success"),f.savingfavorites=!1,p(function(){v()},3e3)},function(){d.error("hub.apps.edit.favorites.notify.error"),f.cancelSorting(),p(function(){v()},3e3)})},f.exitEditMode=function(e){f.sortingOrderUpdatedWithoutActions||f.savingfavorites?(f.sortingWarningMessageShow=!0,e.preventDefault()):v()};var v=function(){r.go("apps")};a.$on("$locationChangeStart",function(e,t,n){f.sortingOrderUpdatedWithoutActions&&(f.sortingWarningMessageShow=!0,e.preventDefault())})}]}),function(e){e.directive("dropdownList",function(){return{restrict:"A",transclude:!0,replace:!1,scope:{config:"=?dropdownList",isActive:"=?dropdownControl"},controllerAs:"$dropdown",bindToController:!0,controller:["$scope","$document","$timeout",function(n,t,o){var i=this;i.isActive=i.isActive||!1,void 0===i.config&&(i.config={closeOnClick:!0});n.$watch("$dropdown.isActive",function(e){i.isActive?o(function(){t.bind("click",r)}):o(function(){t.unbind("click",r)})}),i.toggle=function(){i.isActive=!i.isActive},i.setElement=function(e){i.element=e};var r=function(e){var t=i.element;e&&t&&t[0].contains(e.target)||n.$apply(function(){i.isActive=!1})}}],link:function(e,t,n,o){o.setElement(t),t.bind("click",function(){e.$apply(function(){o.toggle()})})},templateUrl:"app-v2/common/dropdownList.html"}}),e.directive("dropdownPanelBody",function(){return{restrict:"A",link:function(e,t,n,o){t.addClass("dropdown-panel-body");var i=o[0];i.config.closeOnClick||(t.bind("click",function(e){e.stopPropagation()}),t.on("click","button",function(){e.$apply(function(){i.isActive=!1})}))},require:["^dropdownList"]}})}(angular.module("com.vmware.greenbox.appCenter")),angular.module("com.vmware.greenbox.appCenter").directive("searchResultsClose",["UserAgent","$timeout","$document","$window",function(i,r,a,s){return{restrict:"A",scope:{close:"&?",showScrim:"=?"},link:function(t,e,n){function o(e){if(i.isMobile()&&s.innerWidth<=1024)return!1;r(function(){t.close()})}i.isMobile()&&e.bind("touchstart scroll",function(e){i.isAWJade()?$("input").blur():r(function(){t.close()})}),t.$watch("showScrim",function(){t.showScrim?r(function(){a.bind("click",o)}):r(function(){a.unbind("click",o)})})}}}]),appCenter.component("settings",{templateUrl:"app-v2/components/settings/settings.html",controllerAs:"hubSettingsCtrl",controller:["SettingsService","UserAgent","$filter","AppDownloadService","ModalService","UtilService","$scope",function(e,t,n,o,i,r,a){var s=this,l=function(){s.user=e.getCurrentUser(),(s.user.firstName||s.user.lastName)&&(s.user.initials=s.user.firstName[0]+s.user.lastName[0]),s.isPasswordChangeEnabled=s.user.changePasswordAllowed&&!r.isMdmOnlyMode()},c=t.isIOS()&&t.isBrowser(),p=t.isAndroid()&&t.isBrowser();c?(s.downloadTitle=n("i18n")("hub.download.ios"),s.downloadSubtitle=n("i18n")("hub.download.subtitle.mobile")):p&&(s.downloadTitle=n("i18n")("hub.download.android"),s.downloadSubtitle=n("i18n")("hub.download.subtitle.mobile")),s.downloadApp=function(){o.downloadApp()},s.openChangePassword=function(){i.getCurrentModal().open("app-v2/settings/hubBrowserChangePassword.html")},l(),a.$on("user-details-loaded",function(){l()})}]}),appCenter.component("settingList",{templateUrl:"app-v2/components/settingList/settingList.html",bindings:{page:"<"},controllerAs:"settingListCtrl",controller:["$stateParams","$filter",function(e,t){var n={account:t("i18n")("hub.nav.label.settings.account"),devices:t("i18n")("hub.nav.label.settings.devices"),whatsnew:t("i18n")("hub.nav.label.settings.whatsnew"),about:t("i18n")("hub.nav.label.settings.about"),preferences:t("i18n")("hub.nav.label.settings.preferences")};this.settingsNavName=n[this.page.pageId]}]}),appCenter.component("settingSubpage",{template:"<div ng-include=\"'app-v2/components/settingSubpage/partials/' + settingSubpageCtrl.templateUrl\">",controllerAs:"settingSubpageCtrl",controller:["$stateParams","$state","$filter","SettingsService","ConfigService","UserAgent","ClientRuntimeService","ModalService",function(e,t,n,o,i,r,a,s){this.user={},this.templateUrl=e.pageId+".html";var l={account:n("i18n")("hub.nav.label.settings.account"),devices:n("i18n")("hub.nav.label.settings.devices"),whatsnew:n("i18n")("hub.nav.label.settings.whatsnew"),about:n("i18n")("hub.nav.label.settings.about"),preferences:n("i18n")("hub.nav.label.settings.preferences")};this.breadcrumbName=l[e.pageId],this.goToSettingsDefaultPage=function(){768<window.innerWidth?t.go("settings.page",{pageId:"account"}):t.go("settings")},this.user=o.getCurrentUser()}]}),function(e){"use strict";angular.module("com.vmware.greenbox.appCenter").controller("PreferencesController",["$scope","$notify","$filter","HorizonResourcesLaunchService","PasswordVaultService","BootstrapService",function(e,t,n,o,i,r){var a=this;a.preferredClient=o.getPreferredClient(),a.showPVPreference=!1,a.showActions=!1,a.changeThenCancel=!1,a.notificationPreference=_.get(window,"workspaceOne.featureFlags.HUB_MOBILE_FLOWS_INTEGRATION",!1),e.$on("$locationChangeStart",function(e,t,n){-1<n.toString().indexOf("preferences")&&(a.preferredClientTemp=a.preferredClient),-1<t.toString().indexOf("preferences")&&(a.showActions=!1)}),e.$watch(function(){return a.preferredClientTemp},function(e,t){e&&t&&(a.changeThenCancel?a.changeThenCancel=!1:a.showActions=!0)}),a.preferredClient||(a.preferredClient=o.CLIENT_NATIVE,o.setPreferredClient(a.preferredClient)),a.installLink=o.getDownloadLink(),a.cancelPreferenceChange=function(){a.preferredClientTemp!=a.preferredClient&&(a.preferredClientTemp=a.preferredClient,a.changeThenCancel=!0),a.showActions=!1},a.saveLaunchDesktopPreference=function(){a.preferredClient=a.preferredClientTemp,o.setPreferredClient(a.preferredClient),a.showActions=!1,t.success("myapps.launch.view.preferredClient.saveSuccess")},r.init().then(function(){i.getHasPvApps&&i.pingExtension().then(function(e){e||(a.showPVPreference=!0,a.pvstoreInstallLink=i.getPVExtensionDownloadUrl())})}),a.installPasswordVaultPlugin=function(){window.open(a.pvstoreInstallLink)}}])}(),function(e){"use strict";angular.module("com.vmware.greenbox.appCenter").service("SignOutService",["hznLocalStorage","ClientRuntimeService","ConfigService","HttpProxyService","UserAgent",function(t,n,o,i,r){this.continueSignOut=function(e){e&&e.preventDefault(),r.isHubApp()?i.clearAll():i.clearAllAlongWithEnrollmentStatus(),i.clearPeopleSearch(),o.doNotRefreshCache=!0,o.getLogoutUrl().then(function(e){delete t.deviceDetailDelay,n.logout(e)})}}])}(),function(e){"use strict";angular.module("com.vmware.greenbox.appCenter").directive("contextdialog",["$compile","$timeout","$rootScope","$templateCache","$http","UserAgent","$window",function(s,l,e,c,t,n,p){var u,d;return{restrict:"A",controller:function(){var n=c.get;c.get=function(e){var t=n(e);return angular.isArray(t)?t[1]:t},u=angular.noop,d="click"},bindToController:!0,link:function(n,o,i){var e=i.contextdialog;if(e){var r,t,a=n.$eval(e);r=i,(t=a.uris)&&angular.forEach(t,function(e,t){if(e){var n=r[t]||r[angular.lowercase(t)];n&&r.$set("contextdialogTmplId",n)}}),o.on(d,function(e){e.preventDefault(),e.stopPropagation(),n.$apply(function(){u();parseInt(i.contextdialogtp);if(i.contextdialogTmplId){var t;if(!i.contextdialogId){var e=n.$new();angular.extend(e,a.scope),(t=s(c.get(i.contextdialogTmplId))(e)).attr("id","hzn"+(new Date).getTime()),o.closest(".app-label-container").addClass("contextmenu-on"),t.on("click touchstart",function(e){e.stopPropagation()}),o.append(t),i.$set("contextdialogId","#"+t.attr("id"))}angular.element(p).on("resize",function(){p.innerWidth;angular.element(".global-container-browser").find(".appitem-contextdialog-container").remove(),o.append(t),f(o,t)}),l(function(){f(o,t)},0,!1),u=function(e){!e||e.data&&e.data.propagate||e.stopPropagation(),$(document).off("click touchstart",u),t.off("click","a, button",u),angular.element(p).off("resize"),o.closest(".app-label-container").removeClass("contextmenu-on"),t.remove(),i.$set("contextdialogId",""),u=angular.noop}}})})}}};function f(e,t){var n,o=e.closest(".content-container-scrollable, body"),i=o.offset(),r=e.offset(),a=t.find(".appitem-contextdialog-actions-list").outerWidth(),s=t.find(".appitem-contextdialog-actions-list").outerHeight(),l="south",c="";i.right=i.left+o.outerWidth(),i.bottom=i.top+o.outerHeight(),r.right=r.left+e.outerWidth(),r.bottom=r.top+e.outerHeight(),r.top+s>i.bottom&&r.bottom-s>=i.top&&(l="north"),r.left+a<=i.right?c="east":r.right-a>=i.left&&(c="west"),n=l+c,t.removeClass("north northeast northwest south southeast southwest").addClass(n),t.on("click","a, button",u),$(document).on("click touchstart",{propagate:!0},u),$(".modal-container").on("click touchstart",u)}}])}(),appCenter.component("appPromotions",{templateUrl:"app-v2/components/appPromotions/appPromotionsBrowser.html",bindings:{promotions:"<",applications:"<",categories:"<"},controller:["$window","$scope","$timeout","UserAgent",function(e,t,n,o){var i=this;i.carouselConfig={loop:!0,autoWidth:!0,dots:!0,nav:!0,center:!0,margin:0,items:3},1==this.promotions.length&&(i.carouselConfig.mouseDrag=!1,i.carouselConfig.nav=!1,i.carouselConfig.dots=!1,i.carouselConfig.touchDrag=!1),2<=this.promotions.length&&n(function(){$(".owl-carousel").find(".owl-nav").removeClass("disabled"),$(".owl-carousel").on("changed.owl.carousel",function(e){$(this).find(".owl-nav").removeClass("disabled")}),$(".owl-carousel").on("resized.owl.carousel",function(e){$(this).find(".owl-nav").removeClass("disabled")})},200),i.isIOSAndroid=o.isIOS()||o.isAndroid(),i.getAppIcon=function(e){return this.applications[e]&&this.applications[e].iconUrl},i.getAppName=function(e){return this.applications[e]&&this.applications[e].name}}],controllerAs:"appPromotionsBrowserCtrl"}),appCenter.component("preferencesHubBrowser",{templateUrl:"app-v2/components/settingSubpage/partials/preferences.html",controllerAs:"preferencesCtrl",controller:"PreferencesController"}),appCenter.component("notificationPreference",{templateUrl:"app-v2/components/notificationPreference/notificationPreference.html",controllerAs:"notificationPreferenceCtrl",controller:["MobileFlowsService",function(n){var o=this;o.connectors=[],o.loading=!0,n.getConnectors().then(function(e){o.connectors=e,o.loading=!1},function(){o.loading=!1}),o.updatePreference=function(e){var t=_.find(o.connectors,{id:e});"REGISTERED"===t.status?(t.status="IN_PROGRESS",n.enableConnector(e)):"UNREGISTERED"===t.status&&n.disableConnector(e)}}]}),function(e){"use strict";e.directive("lineClamp2",["$timeout","$window","UserAgent",function(r,a,C){return{link:function(e,t){var n=angular.element(a),o={content:e.content.trim(),lines:e.lines},i=_.debounce(function(){!function(e,t){if("nowrap"===window.getComputedStyle(e).whiteSpace||1==t.lines)return e.textContent=t.content;var n,o=t.content,i=e.scrollHeight,r=function(e,t){var n,o=(c=e,p=window.getComputedStyle(c).lineHeight,u=parseFloat(p),isNaN(u)?(d=c,v=d.cloneNode(),d.appendChild(v),v.innerHTML="<br />",f=v.scrollHeight,v.innerHTML="<br /><br />",g=v.scrollHeight,d.removeChild(v),g-f):u),i=t*o,r=window.getComputedStyle(e),a=parseFloat(r.height),s=parseFloat(r.maxHeight),l=[i];var c,p,u,d,f,g,v;isNaN(a)||l.push(a);isNaN(s)||l.push(s);return i=Math.min.apply(Math,l),n=Math.max(o/4,1),i+n}(e,t.lines),a=[];a=o.split(" ");var s=!1,l=(f=a,g=f.reduce(function(e,t){return e.length>t.length?e:t}),g),c=document.createElement("canvas").getContext("2d"),p=window.getComputedStyle(e),u=[],d="";var f,g;null!==p.fontFamily||void 0!==p.fontFamily?(u=p.fontFamily.split(","),d=u[0].trim().replace(/"/g,"")):d="Open Sans Regular";var v="";v=null!==p.fontSize||void 0!==p.fontSize?p.fontSize:"14px";var h=v+" "+d;c.font=h;var m=c.measureText(l).width,b=angular.element(e).width();b<m&&(s=!0);{if(C.isChrome()&&0==s||C.isSafari()&&0==s)return e.textContent=t.content;1==s&&angular.element(e).css("word-break","break-all")}if(i<=r)return;for(n=o.length;n&&e.scrollHeight>r;--n)o=o.substring(0,n),e.textContent=o.trim()+w}(t[0],o)},100),w="…";n.bind("resize",i),e.$on("$destroy",function(){n.unbind("resize",i)}),r(i,0,!1)},replace:!0,restrict:"A",scope:{content:"=",lines:"="},template:"<p>{{::content}}</p>"}}])}(angular.module("com.vmware.greenbox.appCenter"));