resolver.$inject=["StateResolveService","$q","$state"];var $stateProviderRef=null;function resolver(e,t,o){var n=t.defer();return e.canHubNavigate(o)?n.resolve():n.reject(),n.promise}appCenter.config(["$stateProvider","$urlRouterProvider","$provide","$transitionsProvider",function(e,t,o,r){o.decorator("$state",["$delegate","UpdateUrlParamsService","$rootScope","$window",function(o,n,i,a){return r.onStart({},function(e){o.next=e.to(),o.prev=e.from(),o.toParams=e.params();if(o.next.name!==o.prev.name&&-1<["apps","apps.list","apps.search","people","people.details","people.search"].indexOf(o.next.name)&&n.showNativenav(),"apps.notifications"==o.prev.name&&"apps"==o.next.name){var t=a.navigator.onLine||!0;i.$broadcast("tabShown",t)}}),o}]),e.state("apps",{url:"/apps",component:"apps",resolve:{resolver:resolver}}).state("apps.search",{url:"/search-app",component:"appSearch"}).state("apps.list",{url:"/:type/:category",component:"appList",params:{category:{squash:!0,value:null}}}).state("apps.details",{url:"/details/:appId",component:"appDetails"}).state("apps.list.details",{url:"/details/:appId",component:"appDetails"}).state("people",{url:"/people",component:"people",resolve:{resolver:resolver}}).state("people.details",{url:"/details/:userId",component:"peopleDetail",resolve:{resolver:resolver}}).state("people.search",{url:"/search-people",component:"peopleSearch"}).state("changePassword",{url:"/support/change-password",component:"changePassword",activeTab:"changePassword",resolve:{resolver:resolver}}),e.state("index",{url:"/index",controller:["$location",function(e){e.path("/apps"),e.replace()}],resolve:{initAppCalls:["BootstrapService",function(e){return e.getInitAppCallsPromise()}]}}),t.otherwise("/index"),$stateProviderRef=e}]),appCenter.run(["UserAgent",function(e){var t=_.get(window,"workspaceOne.featureFlags.V2_HUB_NOTIFICATIONS",!1);e.isNativeAppVersionIsEqualOrAbove("9.2")?$stateProviderRef.state("notifications",{url:"/notifications/:filter",component:"notificationsV2",resolve:{resolver:resolver},params:{filter:{squash:!0,value:"all"}}}).state("notificationsDeeplink",{url:"/notifications/:notificationId/:filter",component:"notificationsV2",resolve:{resolver:resolver},params:{filter:{squash:!0,value:"all"}}}).state("notifications.details",{url:"/details/:notificationId",component:"notificationDetails",resolve:{resolver:resolver}}).state("notifications.filter-details",{url:"/details/:filter/:notificationId",component:"notificationDetails",resolve:{resolver:resolver}}).state("newApps",{url:"/notifications/newApps/:notificationId",component:"newAppsNotificationsList",activeTab:"newApps",resolve:{resolver:resolver}}):t&&e.isNativeAppVersionBelow("9.2")?$stateProviderRef.state("apps.notifications",{url:"/notifications/:filter",component:"notificationsV2",resolve:{resolver:resolver},params:{filter:{squash:!0,value:"all"}}}).state("apps.notificationsDeeplink",{url:"/notifications/:notificationId/:filter",component:"notificationsV2",resolve:{resolver:resolver},params:{filter:{squash:!0,value:"all"}}}).state("notificationsDeeplink",{url:"/notifications/:notificationId",redirectTo:"apps.notificationsDeeplink"}).state("apps.notifications.details",{url:"/details/:notificationId",component:"notificationDetails",resolve:{resolver:resolver}}).state("apps.notifications.filter-details",{url:"/details/:filter/:notificationId",component:"notificationDetails",resolve:{resolver:resolver}}).state("apps.newApps",{url:"/notifications/newApps/:notificationId",component:"newAppsNotificationsList",activeTab:"newApps",resolve:{resolver:resolver}}):$stateProviderRef.state("apps.notifications",{url:"/notifications",component:"notifications",resolve:{resolver:resolver}}).state("apps.notificationsDeeplink",{url:"/notifications/:notificationId",component:"notifications",resolve:{resolver:resolver}}).state("notificationsDeeplink",{url:"/notifications/:notificationId",redirectTo:"apps.notificationsDeeplink"}).state("apps.archivedNotifications",{url:"/archivedNotifications",component:"notifications",activeTab:"archivedNotifications",resolve:{resolver:resolver}}).state("apps.newApps",{url:"/notifications/newApps/:notificationId",component:"newAppsNotificationsList",activeTab:"newApps",resolve:{resolver:resolver}})}]),function(e){"use strict";angular.module("com.vmware.greenbox.appCenter").directive("actionsheet",["$compile","$timeout","$rootScope","$templateCache","$http","$location","UpdateUrlParamsService",function(s,l,e,p,c,t,f){var u,v,d={};return{restrict:"A",controller:function(){var o=p.get;p.get=function(e){var t=o(e);return angular.isArray(t)?t[1]:t},u=angular.noop,v="click"},bindToController:!0,link:function(o,e,n){var t=n.actionsheet;if(t){var i,a,r=o.$eval(t);i=n,(a=r.uris)&&angular.forEach(a,function(e,t){if(e){var o=i[t]||i[angular.lowercase(t)];o&&(p.get(o)||d[o]||(d[o]=!0,c.get(o,{cache:p}).then(function(e){},function(){d[o]=!1})),i.$set("contextdialogTmplId",o))}}),e.on(v,function(e){e.preventDefault(),e.stopPropagation(),o.$apply(function(){if(u(),n.contextdialogTmplId){var t;if(!n.contextdialogId){var e=o.$new();angular.extend(e,r.scope),(t=s(p.get(n.contextdialogTmplId))(e)).attr("id","hzn"+(new Date).getTime()),f.hideNativenav().then(function(){angular.element(".global-container").append(t),l(function(){angular.element(".global-container").addClass("actionsheet-on")},25,!1)}),n.$set("contextdialogId","#"+t.attr("id"))}u=function(e){e&&(-1!==e.target.getAttribute("class").indexOf("nativenav-show")&&f.showNativenav());$(document).off("click",u),t.off("click","a, button",u),angular.element(".global-container").removeClass("actionsheet-on"),l(function(){t.remove()},355,!1),n.$set("contextdialogId",""),u=angular.noop},t.bind("click","a, button",u)}})})}}}}])}(),angular.module("com.vmware.greenbox.appCenter").directive("pullToRefresh",["$compile","$timeout","$q","UserAgent","$filter",function(e,$,y,b,t){return{scope:!0,restrict:"A",transclude:!0,templateUrl:"app-v2/components/shared/pullToRefresh.html",link:function(o,e,n){if(b.isMobile()){var i,t=e[0],a=document.querySelector(n.scrollContainer),r=0,s=0,l=!1,p=t,c=!0,f=t.querySelector("#pull-to-refresh"),u=t.querySelector(".action-icon"),v=t.querySelector(".pull-spinner"),d=0,m=0;p.style.position="relative",p.style["min-height"]="100px";var h=function(e,t){e.classList.add(t)};h(u,"pull");var g=function(e){l||(30<=e&&a.scrollTop<=0&&m<80&&(h(t,"set-transition-speed"),p.style.transform=p.style.msTransform=p.style.webkitTransform="translate3d( 0, "+parseInt(e/2)+"px, 0 )",15<=e&&"block"!=f.style.display&&(f.style.display="block",u.style.display="block")),0===e&&(f.style.display="none",p.style.transform=p.style.msTransform=p.style.webkitTransform="translate3d( 0, 0, 0 )"),200<=e&&h(u,"release"))},w=function(){var e;l=!1,h(t,"reset-transition-speed"),u.style.display="none",v.style.display="none",g(m=r=0),e="release",u.classList.remove(e)};e.bind("touchstart",function(e){var t=e.originalEvent.touches[0];s=parseInt(t.clientY),d=parseInt(t.clientX),0<a.scrollTop?(c=!1,window.clearTimeout(i)):c=!0}),e.bind("touchmove",function(e){if(0!==a.scrollTop||c||(i=setTimeout(function(){c=!0,window.clearTimeout(i)},500)),c){var t=e.originalEvent.touches[0];r=parseInt(t.clientY)-s,m=Math.abs(parseInt(t.clientX)-d),0<r&&m<80&&g(r)}0===a.scrollTop&&0<r&&e.preventDefault()}),e.bind("touchend",function(e){200<=r&&a.scrollTop<=0?l||function(){g(100);var t=+new Date;l=!0,u.style.display="none",v.style.display="block",y.when(o.$eval(n.pullToRefresh)).then(function(){var e=+new Date-t;$(function(){w()},e<400?400-e:0)},function(){w()})}():g(0)})}}}}]),appCenter.component("appPromotions",{templateUrl:"app-v2/components/appPromotions/appPromotions.html",bindings:{promotions:"<",applications:"<",categories:"<"},controller:["$window","$scope","$timeout","UtilService","UserAgent",function(e,t,o,n,i){var a=this;a.refresh=!0;var r=window.innerWidth<360?280:325;function s(){t.$apply(function(){a.refresh=!1,o(function(){a.refresh=!0},200)})}a.promotionWidth=r+"px",a.carouselConfig={loop:!0,autoWidth:!0,dots:!0,margin:10,items:4,onInitialized:function(e){var t=e.target.clientWidth/e.item.count;a.promotionWidth=r+"px";var o=1===e.item.count?20:15;r<=t?(a.promotionWidth=t-o+"px",this.destroy(),angular.element(e.target).addClass("off")):this.refresh()}},a.getAppIcon=function(e){return this.applications[e]&&this.applications[e].iconUrl},a.getAppName=function(e){return this.applications[e]&&this.applications[e].name},e.addEventListener("orientationchange",function(e){s()}),e.addEventListener("resize",function(){i.isAWJadeMobile()&&s()}),a.isVirtualAppEnabled=function(e){return n.hideVirtualApps()&&this.applications[e]&&-1!==e.indexOf("Virtual")}}],controllerAs:"appPromotionsCtrl"});